language: java
jdk:
- oraclejdk8
before_install: source ./build/s3_caching.sh && getCachedDependencies
install: true
after_success: cacheDependencies
deploy:
  provider: heroku
  strategy: git
  api_key:
    secure: J35uP587KqupZS0+ncJYg1K2aZXMtI6ykFuQlj4tq7WbxfsEf0GkMKksfyZY5LzkAvgOSRbTpA3xw7marzUGkrpjWhrnbXTBpxZ5JTDYyjRrmp3ru0jVliX609O2S4QbQwQb4RJV0wxF23vqTkx9cDQ0ZDhJ1Vzn7BMlOez7g9o=
  app: exwhy-test
  on:
    repo: hgcummings/exwhy-spring
after_deploy: mvn test -Dtest.server=http://exwhy-test.herokuapp.com
env:
  global:
  - HEROKU_APP_NAME: exwhy-test
  - AWS_BUCKET: exwhy-dependencies
  - secure: ftpiRObvz5C4grgJouP9YZNbbUudI2cKoOb/Z/BFZUhvwGi56wv+NyT4v1dPvcO6zt0Un544AofHW+MiTQv93wYMcso5EHznqDjwEujqG5Ulo7G1CeXbszOpDQmfU6mE+JdPpF888jHb4hbPFF1hYHfcW7u7/gkpZVn6Sax7XTo=
  - secure: bK8rdfAgEGOWFUN22Tn1rbpA5GInWT70qsShFVc71OClekD3Z2xvPkCV+JTVbV3Ivimt2ACT+/LZtI0SxOjuAm74uKjTjPaEDyDlOYTOucaUc7B7Zmoje1Y31mFklcnSJqJSyUe7SC3ECuL+uId6EHpf1Zpt1BPfAE99dMeuvnI=
  - secure: VbnFFG3QeV1fQlRZHBK0q0DLME6s+DeTUn+UJoInirttHU1fWdtfnfaH9BtFCzLi09X3HFMK/wV9QO4VgCi1+IfuY8GisleL2v42Lipkyc5nns1DAOKv9SwLDKQvIj062WVZ6Mhx5bfBVpDHx1Rv8o4h09QU6eTz0g+MsK28grQ=
